{"version":3,"sources":["webpack:///webpack/bootstrap d8229b2e0b94d2c0fc04","webpack:///external \"restify-errors\"","webpack:///external \"cli-color\"","webpack:///./server/services/utils.ts","webpack:///external \"lodash\"","webpack:///./server/server.ts","webpack:///external \"source-map-support/register\"","webpack:///external \"os\"","webpack:///external \"cluster\"","webpack:///external \"eventemitter3\"","webpack:///external \"eyes\"","webpack:///external \"restify\"","webpack:///external \"moment\"","webpack:///external \"debug-trace\"","webpack:///./server/routes/proxy.ts","webpack:///./server/services/errors.ts","webpack:///external \"axios\"","webpack:///external \"url\""],"names":[],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/server/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d8229b2e0b94d2c0fc04","module.exports = require(\"restify-errors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"restify-errors\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"cli-color\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cli-color\"\n// module id = 1\n// module chunks = 0","// \n\nimport eyes from 'eyes'\nimport clc from 'cli-color'\nimport _ from 'lodash'\nimport restify from 'restify'\nimport errors from 'restify-errors'\n\n\n\nexport function restifyRoute<B = any, R = any>(route: (req: RestifyRequest<B>, res: RestifyResponse<R>, next: RestifyNext) => void) {\n\treturn route\n}\n\nexport function validate(body: any, keys: Array<string>): void {\n\tif (!body) throw new errors.PreconditionFailedError('Undefined request body');\n\tif (Object.keys(body).length == 0) throw new errors.PreconditionFailedError('Empty request body');\n\tkeys.forEach(function(k) {\n\t\tif (body[k] == null) throw new errors.PreconditionFailedError(`Missing \"${k}\" field`);\n\t})\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/services/utils.ts","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 3\n// module chunks = 0","// \n\n\n\nimport 'source-map-support/register'\nimport os from 'os'\nimport cluster from 'cluster'\n\n\n\nprocess.$instances = os.cpus().length\nprocess.$instance = cluster.isWorker ? Number.parseInt(cluster.worker.id as any) - 1 : -1\n\n\n\nprocess.on('uncaughtException', function(error) {\n\tconsole.error('uncaughtExceptions > error', error)\n})\n\nprocess.on('unhandledRejection', function(error) {\n\tconsole.error('unhandledRejection > error', error)\n})\n\n\n\nimport cron from 'cron'\nimport ci from 'correcting-interval'\nimport ee3 from 'eventemitter3'\n\nprocess.ee3 = new ee3.EventEmitter()\n\n\n\nimport eyes from 'eyes'\nconst eOpts = (eyes as any).defaults as eyes.EyesOptions\neOpts.maxLength = 65536\nimport clc from 'cli-color'\nimport _ from 'lodash'\nimport restify from 'restify'\nimport moment from 'moment'\nimport fs from 'fs'\nimport path from 'path'\nimport rx from 'rxjs/Rx'\nimport uws from 'uws'\n\n\n\nrequire('debug-trace')()\nconsole.format = function(c) {\n\tlet stack = process.$stack\n\tif (!stack) {\n\t\tstack = new Error().stack.toString()\n\t\tstack = stack.replace(/^([^\\n]*?\\n){2}((.|\\n)*)$/gmi, '$2').split('\\n')[2].trim()\n\t}\n\tlet fullpath = stack.split('/').pop()\n\tif (!fullpath) fullpath = c.filename + ':' + c.getLineNumber();\n\tlet file = fullpath.split('.ts:')[0]\n\tlet i = (fullpath.indexOf('.ts:') == -1) ? 0 : 1\n\tlet line = fullpath.split('.ts:')[i].split(':')[0]\n\tlet header = '[' + process.$instance + ']' + '[' + clc.bold(file.toUpperCase()) + ':' + line + ']'\n\tlet format = 'hh:mm:ss:SSS'\n\tlet time = moment().format(format)\n\tlet cString: string\n\tif (c.method == 'log') {\n\t\tcString = clc.blue(time) + header\n\t} else if (c.method == 'info') {\n\t\tcString = clc.green(time) + header\n\t} else if (c.method == 'warn') {\n\t\tcString = clc.yellowBright('=============================== WARN ================================\\n') + clc.yellow(time) + header\n\t} else if (c.method == 'error') {\n\t\tcString = clc.redBright('=============================== ERROR ================================\\n') + clc.red(time) + header\n\t}\n\treturn '\\n \\n' + clc.underline(cString) + '\\n'\n}\n\n\n\nimport * as errors from './services/errors'\nimport * as utils from './services/utils'\n\n\n\n/*███████████████████████████████\n█            RESTIFY            █\n███████████████████████████████*/\n\nconst server = restify.createServer()\n\nserver.opts(/.*/, utils.restifyRoute(function(req, res, next) {\n\tres.header('Access-Control-Allow-Origin', '*')\n\tres.header('Access-Control-Allow-Methods', req.header('Access-Control-Request-Method'))\n\tres.header('Access-Control-Allow-Headers', req.header('Access-Control-Request-Headers'))\n\tres.send(200)\n\treturn next()\n}))\n\nserver.use(utils.restifyRoute(function(req, res, next) {\n\tres.header('Access-Control-Allow-Origin', '*')\n\tres.header('Access-Control-Allow-Methods', req.header('Access-Control-Request-Method'))\n\tres.header('Access-Control-Allow-Headers', req.header('Access-Control-Request-Headers'))\n\treturn next()\n}))\n\nserver.use(restify.plugins.fullResponse())\nserver.use(restify.plugins.bodyParser())\nserver.use(restify.plugins.queryParser())\n\nimport api_proxy from './routes/proxy'\nserver.post('/api/proxy', api_proxy)\n\n\n\n\n\n\n\n\n\nserver.listen(process.$port, process.$host, function() {\n\tconsole.log('listening...')\n})\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/server.ts","module.exports = require(\"source-map-support/register\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map-support/register\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"cluster\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cluster\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"eventemitter3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter3\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"eyes\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eyes\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"restify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"restify\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"debug-trace\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug-trace\"\n// module id = 12\n// module chunks = 0","//\n\nimport eyes from 'eyes'\nimport clc from 'cli-color'\nimport _ from 'lodash'\nimport restify from 'restify'\nimport * as errors from '../services/errors'\nimport * as utils from '../services/utils'\n\nimport axios from 'axios'\nimport url from 'url'\n\n\n\nexport default utils.restifyRoute<any, any>(function(req, res, next) {\n\n\tPromise.resolve().then(function() {\n\t\tutils.validate(req.body, ['method', 'url'])\n\n\t\tlet purl = url.parse(req.body.url)\n\t\tif (!_.isString(purl.host)) throw new errors.PreconditionFailedError('Invalid url');\n\n\t\tlet host = purl.host.split('.').splice(-2).join('.')\n\t\tlet validhosts = [\n\t\t\t'yahoo.com',\n\t\t]\n\t\tif (validhosts.indexOf(host) == -1) {\n\t\t\tthrow new errors.PreconditionFailedError('Invalid url')\n\t\t}\n\n\t\treturn axios.request(req.body).then(function({ data }) {\n\t\t\tres.send(data)\n\t\t\treturn next()\n\t\t})\n\n\t}).catch(function(error) {\n\t\treturn next(errors.generate(error))\n\t})\n\n})\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/proxy.ts","//\n\nimport eyes from 'eyes'\nimport clc from 'cli-color'\nimport _ from 'lodash'\nimport restify from 'restify'\nimport errors from 'restify-errors'\n\n\n\nexport function render(error: IdkError, where = '') { // HttpError\n\tif (_.isString(error)) return clc.bold.redBright(error);\n\tif (!_.isError(error)) return JSON.stringify(error);\n\n\tlet message = error.message\n\tlet stack = error.stack\n\tif (stack && stack.indexOf(message) >= 0) stack = stack.replace(message, '');\n\n\tlet desc = ''\n\tif (error.config) {\n\t\tdesc = desc + '\\nurl > ' + decodeURIComponent(error.config.url)\n\t}\n\tif (error.response && error.response.statusText) {\n\t\tdesc = desc + '\\nstatus > ' + error.response.statusText\n\t}\n\tif (desc) {\n\t\tdesc = desc + '\\n'\n\t\tmessage = 'message > ' + message\n\t}\n\n\tif (where) where = clc.underline.bold.redBright(where) + ' > ';\n\treturn where + clc.bold.redBright(desc + message + '\\n') + stack\n}\n\n\n\nexport function generate(error: IdkError, where?: string): errors.HttpError {\n\tconsole.error('restify route error >', render(error, where))\n\tif (error instanceof errors.HttpError != true) {\n\t\tlet status = 500\n\t\tif (Number.isFinite(error.statusCode)) status = error.statusCode;\n\t\tif (error.response && Number.isFinite(error.response.status)) status = error.response.status;\n\t\tif (error.response && error.response.data && Number.isFinite(error.response.data.statusCode)) status = error.response.data.statusCode;\n\t\terror = errors.makeErrFromCode(status, error)\n\t}\n\treturn error\n}\n\nexport function getStack(i = 2) {\n\tlet stack = new Error().stack.toString()\n\tstack = stack.replace(/^([^\\n]*?\\n){2}((.|\\n)*)$/gmi, '$2')\n\tstack = stack.split('\\n')[i].trim()\n\tstack = stack.split('/').pop()\n\treturn stack.substring(0, stack.length - 1)\n}\n\n\n\nexport function isTimeoutError(error: Error) {\n\tif (error == null || !_.isString(error.message)) return false;\n\tlet message = error.message.toLowerCase()\n\treturn message.indexOf('timeout') >= 0 && message.indexOf('exceeded') >= 0\n}\n\n\n\nexport * from 'restify-errors'\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/services/errors.ts","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 16\n// module chunks = 0"],"sourceRoot":""}